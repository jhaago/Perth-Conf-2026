<!-- FILE: 07-partials/_delegateCard.html  (replace whole file) -->
function delegateCardTpl(idx, d){
  const status=d.status||'';
  const couple=(status==='Couple');
  const requireAccom=d.requireAccom||'';
  const bringingInfant=d.bringingInfant||'';
  return `
  <div class="del-card" data-del-idx="${idx}">
    <div class="del-head"><strong>Delegate</strong>
      <button type="button" class="del-remove" onclick="removeDelegate(${idx})">Remove</button>
    </div>
    <div class="grid">
      <div><label>First Name</label><input id="d_first_${idx}" type="text" autocomplete="given-name" value="${esc(d.firstName||'')}"></div>
      <div><label>Last Name</label><input id="d_last_${idx}" type="text" autocomplete="family-name" value="${esc(d.lastName||'')}"></div>

      <div>
        <label>Status</label>
        <div class="tog" data-name="d_status_${idx}">
          <div class="btn ${status==='Single'?'active':''}" data-val="Single">Single</div>
          <div class="btn ${status==='Couple'?'active':''}" data-val="Couple">Couple</div>
        </div>
        <input type="hidden" id="d_status_${idx}" value="${esc(status)}">
      </div>

      <div><label>Phone</label><input id="d_phone_${idx}" type="tel" inputmode="tel" autocomplete="tel" value="${esc(d.phone||'')}"></div>

      <div id="d_wife_wrap_${idx}" class="collapse ${couple?'show':''}">
        <label>Wife First Name</label><input id="d_wife_${idx}" type="text" autocomplete="given-name" value="${esc(d.wifeFirst||'')}">
      </div>

      <div class="full">
        <label>Require Accommodation?</label>
        <div class="tog" data-name="d_accom_${idx}">
          <div class="btn ${requireAccom==='Yes'?'active':''}" data-val="Yes">Yes</div>
          <div class="btn ${requireAccom==='No'?'active':''}" data-val="No">No</div>
        </div>
        <input type="hidden" id="d_accom_${idx}" value="${esc(requireAccom)}">
      </div>

      <div id="d_accom_wrap_${idx}" class="full collapse ${requireAccom==='Yes'?'show':''}">
        <div class="grid">
          <div><label>Check-in Date</label><input id="d_checkin_${idx}" type="date" autocomplete="off" value="${esc(d.checkIn||'')}"></div>
          <div><label>Check-out Date</label><input id="d_checkout_${idx}" type="date" autocomplete="off" value="${esc(d.checkOut||'')}"></div>
          <div class="full">
            <div class="note del-date-note">Conference nights: Mon–Fri (Mar 2–7, 2026).</div>
            <div class="error del-date-err" style="display:none;"></div>
          </div>
        </div>
      </div>

      <div id="d_infant_section_${idx}" class="full collapse ${couple?'show':''}">
        <label>Bringing Infant?</label>
        <div class="tog" data-name="d_infant_${idx}">
          <div class="btn ${bringingInfant==='Yes'?'active':''}" data-val="Yes">Yes</div>
          <div class="btn ${bringingInfant==='No'?'active':''}" data-val="No">No</div>
        </div>
        <input type="hidden" id="d_infant_${idx}" value="${esc(bringingInfant)}">
      </div>

      <div id="d_infant_wrap_${idx}" class="full collapse ${bringingInfant==='Yes'?'show':''}">
        <div class="grid">
          <div>
             <label>Infant DOB</label>
              <input id="d_infantdob_${idx}" type="date" autocomplete="off" value="${esc(d.infantDob||'')}">
            <div class="error del-infant-warn" style="display:none;"></div>
          </div>
          <div>
            <label>Cot Required?</label>
            <div class="tog" data-name="d_cot_${idx}">
              <div class="btn ${(d.cotRequired||'')==='Yes'?'active':''}" data-val="Yes">Yes</div>
              <div class="btn ${(d.cotRequired||'')==='No'?'active':''}" data-val="No">No</div>
            </div>
            <input type="hidden" id="d_cot_${idx}" value="${esc(d.cotRequired||'')}">
          </div>
        </div>
      </div>

      <div class="full"><label>Additional Comments</label><textarea id="d_notes_${idx}">${esc(d.notes||'')}</textarea></div>
    </div>
  </div>`;
}
